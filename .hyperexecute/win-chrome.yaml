version: 0.2

# OS for the HyperExecute runner
runson: windows

# Single parallel here; run mac-safari.yaml in a separate job for total 2
concurrency: 1

env:
  CI: true
  LT_TUNNEL: iti-ci
  PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD: 1

# Install and build before running tests
pre:
  - npm ci
  - npm run build:ci

# Enable LT tunnel so remote browsers can reach localhost
lambdatest:
  tunnel: true
  tunnelName: iti-ci

# Run only the Desktop Chrome project
matrix:
  project:
    - Desktop Chrome

testSuites:
  - npx playwright test --project "$project" --reporter=line
